
#include <stdint.h>
#include <stdbool.h>
#include <stddef.h>
#include "shapes.h"


// uint32_t charSize = 20;

void shapes_init(void){


	for(uint8_t i = 0; i < MAX_BULLETS; i++) {
		bulletArr[i] = (Object){{0, -10},Bullet};
	}

	for(uint8_t i = 0; i < MAX_ENEMIES; i++) {
		enemyArr[i] = (Object){{0, -10},Enemy};
	}



	enemyArr[MAX_ENEMIES-1] = (Object){{200, 300},Enemy};
	enemyArr[MAX_ENEMIES-2] = (Object){{300, 400},Enemy};
	curEnemyArr[0] = MAX_ENEMIES-1;
	for(uint8_t i = 0; i < MAX_ENEMIES; i++) {
		if(enemyArr[i].origin.y != -10) {
			addEnemy(i);
		}
	}

}

void addEnemy(uint8_t index) {
	curEnemyArr[curEnemy] = index;
	curEnemy += 1;
}

void delEnemy(uint8_t index) {
	curEnemy -= 1;
	// kprintf("\n\r%d",enemyArr[curEnemyArr[curEnemy]].origin.x);
	if(index!=curEnemy) {
		curEnemyArr[index] = curEnemyArr[curEnemy];
	}

}

// Shape ship = (Shape){
// 	{
// 	{{0, -3}, 0x000000FF},
// 	{{0, -2}, 0x000000FF},
// 	{{-1, -1}, 0x000000FF}, {{0, -1}, 0x000000FF}, {{1, -1}, 0x000000FF},
// 	{{-1, 0}, 0x000000FF}, {{0, 0}, 0x000000FF}, {{1, 0}, 0x000000FF},
// 	{{-2, 1}, 0x000000FF}, {{-1, 1}, 0x000000FF}, {{0, 1}, 0x000000FF}, {{1, 1}, 0x000000FF}, {{2, 1}, 0x000000FF},
// 	{{-2, 2}, 0x000000FF}, {{-1, 2}, 0x000000FF}, {{0, 2}, 0x000000FF}, {{1, 2}, 0x000000FF}, {{2, 2}, 0x000000FF}
// 	}, 18
	
// };

Object ship = (Object){
	{500, 750},
	Ship
};

// Object enemy = (Object){
// 	{200, 300},
// 	Enemy
// };

Shape objectShapes[3] = { 
	(Shape){{
	{{-4, 4}, 0x000000FF},{{4, 4}, 0x000000FF},
	{{-4, 3}, 0x000000FF},{{4, 3}, 0x000000FF}, {{-1, 3}, 0x00FF0000},{{1, 3}, 0x00FF0000},
	{{-4, 2}, 0x000000FF},{{4, 2}, 0x000000FF}, {{-1, 2}, 0x000000FF},{{1, 2}, 0x000000FF},{{-2, 2}, 0xFFFFFFFF},{{0, 2}, 0xFFFFFFFF},{{2, 2}, 0xFFFFFFFF},
	{{-4, 1}, 0x000000FF},{{4, 1}, 0x000000FF}, {{-1, 1}, 0xFFFFFFFF},{{1, 1}, 0xFFFFFFFF},{{-2, 1}, 0xFFFFFFFF},{{0, 1}, 0xFFFFFFFF},{{2, 1}, 0xFFFFFFFF},
	{{-4, 0}, 0x000000FF},{{4, 0}, 0x000000FF}, {{-1, 0}, 0xFFFFFFFF},{{1, 0}, 0xFFFFFFFF},{{-2, 0}, 0x000000FF},{{0, 0}, 0xFFFFFFFF},{{2, 0}, 0x000000FF},{{-3, 0}, 0x000000FF},{{3, 0}, 0x000000FF},
	{{-1, -1}, 0x00FF0000},{{1, -1}, 0x00FF0000},{{-2, -1}, 0x000000FF},{{0, -1}, 0x00FF0000},{{2, -1}, 0x000000FF},{{-3, -1}, 0x000000FF},{{3, -1}, 0x000000FF},
	{{-4, -2}, 0x000000FF},{{4, -2}, 0x000000FF}, {{-1, -2}, 0xFFFFFFFF},{{1, -2}, 0xFFFFFFFF},{{-2, -2}, 0x000000FF},{{0, -2}, 0xFFFFFFFF},{{2, -2}, 0x000000FF},{{-3, -2}, 0x000000FF},{{3, -2}, 0x000000FF},
	{{-4, -3}, 0x000000FF},{{4, -3}, 0x000000FF}, {{-1, -3}, 0x00FF0000},{{1, -3}, 0x00FF0000},{{0, -3}, 0x00FF0000}, {{-3, -3}, 0x000000FF}, {{3, -3}, 0x000000FF},
	{{-4,-4}, 0x000000FF},{{4,-4}, 0x000000FF}, {{0,-4}, 0x00FF0000},{{-3, -4}, 0x000000FF},{{3, -4}, 0x000000FF},
	}, 57},
	(Shape){{
		{{0, -3}, 0x000000FF},
		{{0, -2}, 0x000000FF},
		{{-1, -1}, 0x000000FF}, {{0, -1}, 0x000000FF}, {{1, -1}, 0x000000FF},
		{{-1, 0}, 0x000000FF}, {{0, 0}, 0x000000FF}, {{1, 0}, 0x000000FF},
		{{-2, 1}, 0x000000FF}, {{-1, 1}, 0x000000FF}, {{0, 1}, 0x000000FF}, {{1, 1}, 0x000000FF}, {{2, 1}, 0x000000FF},
		{{-2, 2}, 0x000000FF}, {{-1, 2}, 0x000000FF}, {{0, 2}, 0x000000FF}, {{1, 2}, 0x000000FF}, {{2, 2}, 0x000000FF}
		}, 18	
	},
	(Shape){
		{{{0, 0}, 0x000000FF}}, 1}
};

Point objectSize[3] = { 
	(Point){(9*PIXEL_SIZE)/2,(9*PIXEL_SIZE)/2},
	(Point){0,0},
	(Point){0,0}
};

Point enemyPath[2][120] = {{{666.49, 753.818}, {651.689, 751.39}, {637.015, 748.287}, {622.499, 744.513}, {608.171, 740.078}, {594.062, 734.991}, {580.2, 729.262}, {566.616, 722.904}, {553.338, 715.929}, {540.393, 708.352}, 
	{527.81, 700.191}, {515.614, 691.46}, {503.831, 682.18}, {492.486, 672.369}, {481.603, 662.048}, {471.205, 651.239}, {461.313, 639.964}, {451.949, 628.248}, {443.131, 616.115}, {434.88, 603.59}, 
	{427.211, 590.7}, {420.142, 577.472}, {413.687, 563.933}, {407.859, 550.113}, {402.671, 536.04}, 
	{395.385, 512.117}, {393.079, 497.325}, {393.971, 482.38}, {398.021, 467.967}, {405.043, 454.744}, {414.716, 443.318}, {426.598, 434.209}, {440.145, 427.836}, {454.738, 424.489}, {469.708, 424.322}, 
	{484.372, 427.342}, {498.057, 433.411}, {510.14, 442.252}, {520.066, 453.46}, {527.381, 466.522}, {531.752, 480.841}, {532.978, 495.762}, {531.003, 510.603}, {525.917, 524.684}, {517.953, 537.361}, 
	{507.475, 548.055}, {494.963, 556.276}, {480.989, 561.649}, {466.192, 563.927}, {451.249, 563.007}, {436.844, 558.93}, {423.635, 551.882}, {412.226, 542.187}, {403.141, 530.288}, {396.793, 516.729}, 
	{396.793, 516.729}, {396.793, 501.729}, {396.793, 486.729}, {396.793, 471.729}, {396.793, 456.729}, {396.793, 441.729}, {396.793, 426.729}, {396.793, 411.729}, {396.793, 396.729}, {396.793, 381.729}, 
	{396.793, 366.729}, {396.793, 351.729}, {396.793, 336.729}, {396.793, 321.729}, {396.793, 306.729}, {396.793, 291.729}, {396.793, 276.729}, {396.793, 261.729}, {396.793, 246.729}, {396.793, 231.729}, 
	{396.793, 216.729}, {396.793, 201.729}, {396.793, 186.729}, {396.793, 171.729}, {396.793, 156.729}, {396.793, 141.729}, {396.793, 126.729}, {396.793, 111.729}, {396.793, 96.729}, {396.793, 81.729}, 
	{396.793, 66.729}, {396.793, 51.729}, {396.793, 36.729}, {396.793, 21.729}},
	{{390, 50}, {390, 65}, {390, 80}, {390, 95}, {390, 110}, {390, 125}, {390, 140}, 
	{390, 150}, {389.064, 164.961}, {386.269, 179.688}, {381.661, 193.953}, {375.31, 207.531}, {367.316, 220.212}, 
	{349, 239.85}, {337.571, 249.565}, {326.142, 259.279}, {314.713, 268.994}, {303.284, 278.709}, {291.855, 288.424}, {280.425, 298.138}, {268.996, 307.853}, {257.567, 317.568}, {246.138, 327.283}, 
	{234.709, 336.997}, {223.28, 346.712}, {211.851, 356.427}, {200.422, 366.141}, {188.993, 375.856}, {177.564, 385.571}, {166.135, 395.286}, 
	{155.44, 404.492}, {145.49, 415.687}, {137.802, 428.541}, {132.644, 442.603}, {130.198, 457.38}, {130.549, 472.354}, {133.685, 487}, {139.496, 500.805}, {147.779, 513.284}, {158.243, 524.001}, 
	{170.521, 532.58}, {184.182, 538.72}, {198.749, 542.205}, {213.711, 542.914}, {228.542, 540.822}, {242.723, 536.001}, {255.757, 528.622}, {267.187, 518.943}, {276.613, 507.302}, {283.704, 494.109}}};
